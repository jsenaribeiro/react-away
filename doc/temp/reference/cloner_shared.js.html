<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: cloner/shared.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: cloner/shared.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React from "react";
import { inRouted } from '../router/routed';
import { focus } from '../storer/focus';
import { render } from "../root";
import { context } from ".";
import cloneFunction from './function';
import cloneElement from './element';
import cloneFragment from './fragment';
import cloneClass from './class';
const letChildren = (tag, child) => {
    return ({ tag, children: child.props.children, component: child });
};
/**
 * Deep component cloning
 * @param {object} root root component
 * @param {object} tag initial tag name
 * @returns deep cloned component three
 */
export const cloneComponent = (root, tag = "App") => (context.count = 1) &amp;&amp; focus(() => cloneChildren(letChildren(tag, root)));
export const cloneChildren = ({ tag, children, component }) => React.Children.map(children, child => cloneChild({ tag, child, component }));
export const cloneChild = (args) => !inRouted(args.child) ? undefined
    : React.isValidElement(args.child)
        ? clone(args)
        : args.child;
const clone = (args) => React.cloneElement(deepClone(args), {}, cloneChildren({ ...args, children: args.child.props.children }));
export const deepClone = (args) => !render.directives?.length ? args.child
    : when(args.child, "class") ? cloneClass(args)
        : when(args.child, "element") ? cloneElement(args)
            : when(args.child, "fragment") ? cloneFragment(args)
                : when(args.child, "function") ? cloneFunction(args)
                    : args.child;
const when = (child, ...types) => types.includes("class") &amp;&amp; child?.type?.toString().startsWith("class")
    || types.includes("fragment") &amp;&amp; child?.type?.toString() == 'Symbol(react.fragment)'
    || types.includes("element") &amp;&amp; typeof child?.type === "string"
    || types.includes((typeof child?.type));
export const properHandler = (props, { tag, component }) => render.directives
    .map(fn => fn(props, { id: context.count, tag, component }))
    .reduce((last, next) => ({ ...last, ...next }));
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Authoring.html">Authoring</a></li><li><a href="module-Binding.html">Binding</a></li><li><a href="module-Routing.html">Routing</a></li><li><a href="module-Storing.html">Storing</a></li><li><a href="module-Styling.html">Styling</a></li><li><a href="module-Synching.html">Synching</a></li></ul><h3>Classes</h3><ul><li><a href="Exception.html">Exception</a></li><li><a href="I18nFluent.html">I18nFluent</a></li><li><a href="module.exports.html">exports</a></li><li><a href="module-Authoring.Authenticator.html">Authenticator</a></li><li><a href="module-Routing.Router.html">Router</a></li><li><a href="module-Storing.Provider.html">Provider</a></li><li><a href="module-Synching.ApiAsync.html">ApiAsync</a></li><li><a href="Validation.html">Validation</a></li></ul><h3>Global</h3><ul><li><a href="global.html#cloneComponent">cloneComponent</a></li><li><a href="global.html#token">token</a></li><li><a href="global.html#useLanguage">useLanguage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Wed Sep 07 2022 08:20:43 GMT-0300 (Brasilia Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
